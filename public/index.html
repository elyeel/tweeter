<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta Information -->
    <title>Tweeter - Home Page</title>

    <!-- External CSS -->
    <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" type="text/css" />
    
    <link href="https://fonts.googleapis.com/css?family=Bungee|Source+Sans+Pro:300,300i,700,700i&display=swap" rel="stylesheet">
    
    <!-- App CSS -->
    <link rel="stylesheet" href="/styles/layout.css" type="text/css" />
    <link rel="stylesheet" href="/styles/nav.css" type="text/css" />
    <link rel="stylesheet" href="/styles/header.css" type="text/css" />
    <link rel="stylesheet" href="/styles/main.css" type="text/css" />
    <link rel="stylesheet" href="/styles/form.css" type="text/css" />
    <link rel="stylesheet" href="/styles/tweet.css" type="text/css" />

    <!-- External JS -->
    <script type="text/javascript" src="/vendor/jquery-2.2.3.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/locale/en-ca.js" type="text/javascript"></script> -->

    <!-- App JS -->
    <script type="text/javascript" src="/scripts/app.js"></script>
    <script type="text/javascript" src="/scripts/composer-char-counter.js"></script>
  </head>

  <body>

    <!-- Top nav bar (fixed) -->
    <nav>
      <span>Tweeter</span>
      <span class="write-tweet"><strong>Write</strong> a new tweet</span>
    </nav>
    <header>
        <div class="avatar">
            <img src="/images/profile-hex.png"> 
        </div>
        <br>
        <div>
            <h2 class="div">Risyardi</h2>
        </div>
    </header>

    <!-- Page-specific (main) content here -->
    <main class="container">
      <section class="new-tweet">
        <h2>Compose Tweet</h2>
        <form class="compose-tweet" method="POST" action="/tweets">
          <textarea class="tweet-text" name="text" placeholder="What are you humming about?"></textarea>
          <input class="btn" type="submit" value="Tweet">
          <span class="counter">140</span>
        </form>
      </section>
      <section class="tweet-container"></section>
      <!-- <article class="tweet">
        <header>
          <span class="h-image">
            <img src="/images/businessman.png">
          </span>
          <span class="h-name">
            <h3>Name</h3>
          </span>
          <span class="h-aname">
            <h3>@Name</h3>
          </span>
        </header>
        <p>
          If I have seen further it is by standing on the shoulders of giants
        </p>
        <footer class="foot">
          <span class="footer-left">
            <h4>10 days ago</h4>
          </span>
          <span class="footer-right">
              <i class='fas fa-flag' style='font-size:24px'></i>
              <i class='fas fa-retweet' style='font-size:24px'></i>
              <i class='fas fa-heart' style='font-size:24px'></i>
          </span>
          <h3>Footer Tweet</h3>
        </footer>
      </article> -->
    </main>
      
  <script>
    $(".compose-tweet").submit(function(event) {
      event.preventDefault();
      //ajax post
      $.ajax({
        method: "POST",
        url: "/tweets",
        data: $('.compose-tweet').serialize(),
        success: function () {
          $('.tweet-container').empty(); // clear the client side tweets
          loadTweets(); // reloading the tweets back with latest update under success callback
        }
      })
        .done(function(data, textStatus) {
          // alert( "Data Saved: " + JSON.stringify(data) );
          // // rerender the tweets
          console.log('done:', textStatus);
        });
    })
  </script>
  </body>
</html>
